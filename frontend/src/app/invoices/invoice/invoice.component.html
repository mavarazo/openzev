<div class="d-flex align-items-center justify-content-between pb-3">
  <h4>
    Invoice
  </h4>

  <div class="btn-toolbar d-flex justify-content-end" role="toolbar">
    <div class="btn-group" role="group">
      <button class="btn btn-outline-primary" routerLink="edit">
        <i class="bi bi-printer me-1"></i>
        <span>Print</span>
      </button>
      <button class="btn btn-outline-primary" routerLink="edit">
        <i class="bi bi-pencil-square me-1"></i>
        <span>Edit</span>
      </button>
      <button class="btn btn-outline-danger" (click)="delete()">
        <i class="bi bi-trash me-1"></i>
        <span>Delete</span>
      </button>
    </div>
  </div>
</div>

<div class="card mb-3">
  <div class="card-body">
    <ng-container
      *ngIf="{
        accounting: accounting$ | async,
        invoice: invoice$ | async,
        ownerships: ownerships$ | async,
        unit: unit$ | async
      } as data">
      <div class="row mb-3">
        <div class="col-2">
          Period
        </div>
        <div class="col">
          {{data.accounting?.periodFrom | date}} - {{data.accounting?.periodUpto | date}}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-2">
          Unit
        </div>
        <div class="col">
          {{data.unit?.subject}}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-2">
          Recipient
        </div>
        <div class="col">
          <div *ngFor="let ownership of data.ownerships">
            <div>{{ownership.owner?.firstName}} {{ownership.owner?.lastName}}</div>
            <div>{{ownership.owner?.street}} {{ownership.owner?.houseNr}}</div>
            <div>{{ownership.owner?.postalCode}} {{ownership.owner?.city}}</div>
          </div>
        </div>
      </div>

      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th scope="col"></th>
          <th scope="col" class="text-end">Usage</th>
          <th scope="col" class="text-end">Tariff</th>
          <th scope="col" class="text-end">Amount</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>High tariff</td>
          <td class="text-end">{{data.invoice?.usageHighTariff}} kWh</td>
          <td class="text-end">{{this.highTariff | currency: 'CHF'}}</td>
          <td class="text-end">{{data.invoice?.amountHighTariff | currency: 'CHF' }}</td>
        </tr>
        <tr>
          <td>Low tariff</td>
          <td class="text-end">{{data.invoice?.usageLowTariff}} kWh</td>
          <td class="text-end">{{this.lowTariff | currency: 'CHF'}}</td>
          <td class="text-end">{{data.invoice?.amountLowTariff | currency: 'CHF' }}</td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
          <td></td>
          <td class="text-end"><strong>{{data.invoice?.usageTotal}} kWh</strong></td>
          <td></td>
          <td class="text-end"><strong>{{data.invoice?.amountTotal | currency: 'CHF'}}</strong></td>
        </tr>
        </tfoot>
      </table>
    </ng-container>
  </div>
</div>
